(()=>{"use strict";var t={185:(t,e,n)=>{t.exports=n.p+"8f154ded0945c391a1de.wasm"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}let r;n.m=t,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href;let i=null;function o(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(r.memory.buffer)),i}let s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&s.decode();let c=0;const a=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"}),l="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>r.__wbg_universe_free(t>>>0,1));class u{static __wrap(t){t>>>=0;const e=Object.create(u.prototype);return e.__wbg_ptr=t,l.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,l.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_universe_free(t,0)}static new(t,e){const n=r.universe_new(t,e);return u.__wrap(n)}back(){r.universe_back(this.__wbg_ptr)}tick(){r.universe_tick(this.__wbg_ptr)}get_cells(){return r.universe_get_cells(this.__wbg_ptr)>>>0}toggle_cell(t,e){r.universe_toggle_cell(this.__wbg_ptr,t,e)}reset_cells(){r.universe_reset_cells(this.__wbg_ptr)}randomize_cells(){r.universe_randomize_cells(this.__wbg_ptr)}draw_glider(t,e){r.universe_draw_glider(this.__wbg_ptr,t,e)}get_width(){return r.universe_get_width(this.__wbg_ptr)>>>0}get_height(){return r.universe_get_height(this.__wbg_ptr)>>>0}set_width(t){r.universe_set_width(this.__wbg_ptr,t)}set_height(t){r.universe_set_height(this.__wbg_ptr,t)}}const h=new Set(["basic","cors","default"]);function _(){const t={wbg:{}};return t.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return function(t,e){try{return t.apply(this,e)}catch(t){const e=function(t){const e=r.__externref_table_alloc();return r.__wbindgen_export_2.set(e,t),e}(t);r.__wbindgen_exn_store(e)}}(function(t,e){var n,r;globalThis.crypto.getRandomValues((n=t,r=e,n>>>=0,o().subarray(n/1,n/1+r)))},arguments)},t.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_2,e=t.grow(4);t.set(0,void 0),t.set(e+0,void 0),t.set(e+1,null),t.set(e+2,!0),t.set(e+3,!1)},t.wbg.__wbindgen_throw=function(t,e){throw new Error((n=t,function(t,e){return c+=e,c>=2146435072&&(s="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}},s.decode(),c=e),s.decode(o().subarray(t,t+e))}(n>>>=0,e)));var n},t}async function f(t){if(void 0!==r)return r;void 0!==t&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===t&&(t=new URL(n(185),n.b));const e=_();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:s}=await async function(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if(!t.ok||!h.has(t.type)||"application/wasm"===t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}(await t,e);return function(t,e){return r=t.exports,f.__wbindgen_wasm_module=e,i=null,r.__wbindgen_start(),r}(o,s)}const d=f;var p,w=(p=function(t,e){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},p(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function g(t,e){var n=document.getElementById(t);if(!n)throw new Error('failed to get element with id: "'.concat(t,'"'));if(!(n instanceof e))throw new Error('unexpected type for "'.concat(t,'"'));return n}var b,y,v,m,x=function(t){function e(e,n,r,i){var o=t.call(this,n,r,i)||this;if(o.cellSize=5,o.gridColor="#CCCCCC",o.deadColor="#FFFFFF",o.aliveColor="#000000",o.canvas=e,o.canvas.height=(o.cellSize+1)*i+1,o.canvas.width=(o.cellSize+1)*r+1,o.ctx=o.canvas.getContext("2d"),!o.ctx)throw new Error("canvas must have 2D context");return o}return w(e,t),e.prototype.drawNextFrame=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.strokeStyle=this.gridColor;for(var t=0;t<=this.width;++t)this.ctx.moveTo(t*(this.cellSize+1)+1,0),this.ctx.lineTo(t*(this.cellSize+1)+1,(this.cellSize+1)*this.height+1);for(var e=0;e<=this.height;++e)this.ctx.moveTo(0,e*(this.cellSize+1)+1),this.ctx.lineTo((this.cellSize+1)*this.width+1,e*(this.cellSize+1)+1);this.ctx.stroke();var n=new Uint8Array(this.memory.buffer,this.universe.get_cells(),this.width*this.height);for(this.ctx.beginPath(),t=0;t<this.height;++t)for(e=0;e<this.width;++e)this.ctx.fillStyle=n[t*this.width+e]===a.Dead?this.deadColor:this.aliveColor,this.ctx.fillRect(e*(this.cellSize+1)+1,t*(this.cellSize+1)+1,this.cellSize,this.cellSize);this.ctx.stroke()},e}(function(){function t(t,e,n){this.memory=t,this.universe=u.new(e,n),this.width=this.universe.get_width(),this.height=this.universe.get_height()}return t.prototype.reset_cells=function(){this.universe.reset_cells(),this.drawNextFrame()},t.prototype.randomize_cells=function(){this.universe.randomize_cells(),this.drawNextFrame()},t.prototype.toggle_cell=function(t,e){this.universe.toggle_cell(t,e),this.drawNextFrame()},t.prototype.draw_glider=function(t,e){this.universe.draw_glider(t,e),this.drawNextFrame()},t.prototype.tick=function(){this.universe.tick(),this.drawNextFrame()},t.prototype.back=function(){this.universe.back(),this.drawNextFrame()},t}());b=void 0,y=void 0,m=function(){var t,e,n,r,i,o,s,c,a,l,u,h,_,f,p,w;return function(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=c(0),s.throw=c(1),s.return=c(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(t){c=[6,t],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}(this,function(b){switch(b.label){case 0:return[4,d()];case 1:return t=b.sent().memory,e=[g("canvas",HTMLCanvasElement),g("step-backward",HTMLButtonElement),g("control",HTMLButtonElement),g("step-forward",HTMLButtonElement),g("clear",HTMLButtonElement),g("random",HTMLButtonElement),g("stop-when-drawing",HTMLInputElement)],r=e[1],i=e[2],o=e[3],s=e[4],c=e[5],a=e[6],l={renderer:new x(n=e[0],t,32,32),animationId:null},u=l.renderer,h=l.animationId,_=function(){i.textContent="▶",cancelAnimationFrame(h),h=null},f=function(){i.textContent="⏸",w()},p=function(t,e){var r=n.getBoundingClientRect(),i=n.width/r.width,o=n.height/r.height,s=(t-r.left)*i,c=(e-r.top)*o;return[Math.min(Math.floor(c/(u.cellSize+1)),u.height-1),Math.min(Math.floor(s/(u.cellSize+1)),u.width-1)]},r.onclick=function(){stop(),u.back()},i.onclick=function(){return h?_():f()},o.onclick=function(){stop(),u.tick()},s.onclick=function(){return u.reset_cells()},c.onclick=function(){return u.randomize_cells()},n.onclick=function(t){a.checked&&_();var e=p(t.clientX,t.clientY),n=e[0],r=e[1];t.ctrlKey?u.draw_glider(n,r):u.toggle_cell(n,r)},u.drawNextFrame(),w=function(){h=requestAnimationFrame(function(){u.tick(),w()})},[2]}})},new((v=void 0)||(v=Promise))(function(t,e){function n(t){try{i(m.next(t))}catch(t){e(t)}}function r(t){try{i(m.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):(i=e.value,i instanceof v?i:new v(function(t){t(i)})).then(n,r)}i((m=m.apply(b,y||[])).next())})})();